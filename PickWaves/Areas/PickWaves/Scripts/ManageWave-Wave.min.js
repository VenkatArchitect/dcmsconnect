$(document).ready(function(){var n=(new Date).getTime();$("#bucketModelPartial").bucketmodel();$("#bucketModelPartial,#clearFilter").on("click","div[data-activity] .ui-progressbar-value",function(t){var i=$("#divTabs"),r={state:$(this).attr("data-boxstate"),activity:$(this).closest("div[data-activity]").attr("data-activity")};$("> ul > li > a",i).each($.proxy(function(n,t){var r=$(t).attr("data-activity-param"),u=$(t).attr("data-state-param"),i=$(t).attr("href").replace(new RegExp(r+"=\\w+"),r+"="+this.activity);i=i.replace(new RegExp(u+"=\\w+"),u+"="+this.state);$(t).attr("href",i)},r));n++;i.tabs("load",i.tabs("option","active"));$("div[data-activity] .ui-progressbar-value",t.delegateTarget);$("#filterStatus").find("div[data-activity]").hide().end().find("div[data-activity="+r.activity+"][data-boxstate="+r.state+"]").show();$("#filterStatus div[data-activity]:visible").length>0?$("#clearFilter").show():$("#clearFilter").hide()}).on("click","a.edit-wave",function(){return $("#hfDisplayEditable").val("True"),$("#dlgFreeze").dialog("open"),!1});$("#divTabs").tabs({active:$("#divTabs").attr("data-active-tab"),beforeLoad:function(t,i){var r=$("<img><\/img>").attr({src:$(this).attr("data-load-image-url"),alt:"Loading.."});i.panel.html(r[0].outerHTML+"<br/><strong>Please Wait..<\/strong>");i.panel.removeClass("ui-state-error");i.jqXHR.error(function(n){i.panel.html(n.responseText).addClass("ui-state-error")});i.ajaxSettings.url=i.ajaxSettings.url.replace(/_=\d*/g,"_="+n)}});$("#btnGo").button();$("#btnSave").button({icons:{primary:"ui-icon-disk"}});$("#dlgFreeze").dialog({autoOpen:!1,closeOnEscape:!0,modal:!0,buttons:[{text:"OK",click:function(){$("form",this).submit()}},{text:"Cancel",click:function(){$(this).dialog("close")}}]});$("#actionMenu").menu({select:function(n,t){var i=$("span.ui-icon",t.item);i.is(".ui-icon-arrowthick-1-n")?$("#bucketModelPartial").bucketmodel("increasePriority"):i.is(".ui-icon-arrowthick-1-s")?$("#bucketModelPartial").bucketmodel("decreasePriority"):t.item.is(".freeze-action")?($("#hfDisplayEditable").val("False"),$("#dlgFreeze").dialog("open")):i.is(".ui-icon-pencil")&&!$("a",t.item).attr("href")&&($("#hfDisplayEditable").val("True"),$("#dlgFreeze").dialog("open"))}});$("#unfreezeWave").click(function(){$("#actionMenu .freeze-action .ui-icon-unlocked").click()});$("#divTabs").on("click","table tbody tr span[data-pickslip-remove-url]",function(){if(confirm("Are you sure, you want to remove "+$(this).attr("data-pickslip-val")+" pickslip from pick wave?"))$.ajax($(this).attr("data-pickslip-remove-url"),{type:"POST",success:function(n,t,i){if(i.status==203){alert(i.responseText);return}location.reload(!0);return}}).error(function(n){alert(n.responseText)});else return})});$.widget("custom.bucketmodel",{options:{},_create:function(){this._on({"click div.div-bucket >span.ui-icon-arrowthick-1-s,div.div-bucket >span.ui-icon-arrowthick-1-n":function(n){this._doChangePriority(n.target)}})},_doChangePriority:function(n){$.ajax($(n).closest("div.div-bucket").attr($(n).is(".ui-icon-arrowthick-1-n")?"data-increase-priority-url":"data-decrease-priority-url"),{cache:!1,type:"POST",context:n,beforeSend:function(n,t){$(t.context).closest("div.div-bucket").addClass("ui-state-highlight")}}).done(function(n){$(this).closest("div.div-bucket").removeClass("ui-state-highlight").find("span.span-Priority").html(n)}).error(function(n){$(this).closest("div.div-bucket").removeClass("ui-state-highlight");alert(n.responseText)})},increasePriority:function(){var n=$("span.ui-icon-arrowthick-1-n",this.element);this._doChangePriority(n[0])},decreasePriority:function(){var n=$("span.ui-icon-arrowthick-1-s",this.element);this._doChangePriority(n[0])}});$(document).ready(function(){$("#tbPriority").spinner({spin:function(n,t){return t.value>99?($(this).spinner("value",1),!1):t.value<1?($(this).spinner("value",99),!1):void 0}})});