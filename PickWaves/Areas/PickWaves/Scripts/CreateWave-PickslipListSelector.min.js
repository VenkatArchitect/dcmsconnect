$.widget("custom.pickslipmatrix",{options:{refreshing:null,refreshed:null,selected:null},_create:function(){this._on({"change th select":function(){return this._trigger("refreshing")===!1?!1:(this.element.addClass("ui-state-disabled").load($("div[data-url]:first",this.element).attr("data-url"),$("input,select",this.element).serialize(),$.proxy(function(n,t,i){t=="error"&&alert("Sorry but there was an error: "+i.status+" "+i.statusText+". Refresh the page.");this.self.element.removeClass("ui-state-disabled");this.self._trigger("refreshed")},{self:this})),!0)},"click td.ui-selectable":function(n){this._selectTd(n.target,n)},"keypress td.ui-selectable":function(n){n.which==$.ui.keyCode.SPACE&&(this._selectTd(n.target,n),n.preventDefault())}})},_selectTd:function(n,t){$("td.ui-state-highlight",this.element).removeClass("ui-state-highlight");var i=$(n).closest("tr");this._trigger("selected",t,{rowValue:$("input:radio",i).prop("checked",!0).val(),colValue:$("thead tr.dc-header input:radio",this.element).eq($("td",i).index(n)-2).prop("checked",!0).val(),td:n});$(n).addClass("ui-state-highlight").focus()},_refresh:function(){},_destroy:function(){},_setOptions:function(){this._superApply(arguments);this._refresh()},_setOption:function(n,t){this._super(n,t)},dimRowDisplayName:function(){return $("div[data-row-dimension]",this.element).attr("data-row-dimension")},dimColDisplayName:function(){return $("div[data-col-dimension]",this.element).attr("data-col-dimension")}});$.widget("custom.bucketmodel",{options:{},_create:function(){this._on({"click div.div-bucket >span.ui-icon-arrowthick-1-s,div.div-bucket >span.ui-icon-arrowthick-1-n":function(n){this._doChangePriority(n.target)}})},_doChangePriority:function(n){$.ajax($(n).closest("div.div-bucket").attr($(n).is(".ui-icon-arrowthick-1-n")?"data-increase-priority-url":"data-decrease-priority-url"),{cache:!1,type:"POST",context:n,beforeSend:function(n,t){$(t.context).closest("div.div-bucket").addClass("ui-state-highlight")}}).done(function(n){$(this).closest("div.div-bucket").removeClass("ui-state-highlight").find("span.span-Priority").html(n)}).error(function(n){$(this).closest("div.div-bucket").removeClass("ui-state-highlight");alert(n.responseText)})},increasePriority:function(){var n=$("span.ui-icon-arrowthick-1-n",this.element);this._doChangePriority(n[0])},decreasePriority:function(){var n=$("span.ui-icon-arrowthick-1-s",this.element);this._doChangePriority(n[0])}});$(document).ready(function(){$("#matrixPartial").pickslipmatrix({selected:function(){$("#frmPickslipMatrix").submit()}});$("#bucketModelPartial").bucketmodel()});