@*Inspired by http://line25.com/tutorials/design-and-code-a-cool-iphone-app-website-in-html5*@
@model DcmsMobile.Models.ViewModelBase
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0" />
    <link rel="stylesheet" href="@Links_DcmsMobile.Content.jquery_mobile_1_4_2_css" />
    <script src="@Links_DcmsMobile.Scripts.jquery_1_8_2_js"></script>
    <script type="text/javascript">
        $(document).on("mobileinit", function () {
            //http://api.jquerymobile.com/global-config/
            $.mobile.ajaxEnabled = false;
            $.mobile.pushStateEnabled = false;
        });
    </script>
    <script src="@Links_DcmsMobile.Scripts.jquery_mobile_1_4_2_js"></script>

    <script src=jquery.mobile/jquery.mobile.js></script>
    @RenderSection("head", false)
</head>
<body>
    <div data-role="page" data-dom-cache="false">
        <header data-role="header">
            <h1>@ViewBag.Title</h1>
            @if (!string.IsNullOrWhiteSpace(Model.HomeUrl))
            {
                <a href="@Model.HomeUrl" class="ui-btn ui-icon-home ui-btn-icon-left">Home</a>
            }
            <a href="#popupLayout" data-rel="popup" data-transition="slidedown" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-bars ui-btn-icon-notext ui-btn-a">.</a>
            <div data-role="popup" id="popupLayout" data-theme="b" class="ui-mini">
                <ul data-role="listview" data-inset="true" style="min-width:210px;">
                    @if (!string.IsNullOrWhiteSpace(Model.LoginUrl))
                    {
                        <li><a href="@Model.LoginUrl">Login</a></li>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.LogoffUrl))
                    {
                        <li><a href="@Model.LogoffUrl">Logoff @ViewContext.HttpContext.User.Identity.Name</a></li>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.PasswordUrl))
                    {
                        <li><a href="@Model.PasswordUrl">Change Password</a></li>
                    }
                    @if (!string.IsNullOrWhiteSpace(Model.DiagnosticUrl))
                    {
                        <li><a href="@Model.DiagnosticUrl">Diagnostics</a></li>
                    }
                </ul>
            </div>
        </header>

        <section data-role="content">
            <aside>
                @Html.StatusSummary()
                @Html.ValidationSummary()
            </aside>
            @RenderBody()
        </section>
    </div>
    @*Can add capability to render other pages here*@
</body>
</html>
