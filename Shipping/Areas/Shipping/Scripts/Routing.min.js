$(function(){$.widget("ui.selectable",$.ui.selectable,{_mouseStart:function(a){a.ctrlKey=true;this._super(a)},_mouseDrag:function(a){a.ctrlKey=true;this._super(a)},_mouseStop:function(a){a.ctrlKey=true;this._super(a)},_trigger:function(b,a,c){if(b=="selecting"){$(c.selecting).addClass("ui-selected")}this._super(b,a,c)}})});$(document).ready(function(){$("#cbShowRouted").change(function(b){$("#frmShowRouted").submit()});function a(){var b=$("tbody tr.ui-selected").not(".text-changed");if(b.length>=0){$("span.spnPOSelected").text("Total : "+b.length+" POs selected")}}$("#tbDC").change(function(b){$.ajax({cache:false,url:$("#tbDC").attr("data-validate-url").replace("~",$("#tbDC").val()),type:"POST",context:this,success:function(c,e,d){if(d.status==203){alert(c);return}},error:function(d,e,c){alert(d.responseText)}})});$("#dlgRoutingEditor").dialog({autoOpen:false,modal:false,title:"Update Routing Information",dialogClass:"routing-editor",create:function(c,e){var d=this;var b=false;$("#btnRoutingEditor").click(function(f){if(!b){$(d).dialog("option","position",{my:"left bottom",at:"left bottom",of:$(f.target)}).dialog("open")}}).button().draggable({start:function(f,g){b=true},stop:function(f,g){setTimeout(function(){b=false},0)}})},open:function(b,c){$("#btnRoutingEditor").hide()},beforeClose:function(b,c){$("#btnRoutingEditor").show()},buttons:[{text:"Apply",click:function(d,e){if($("input:checkbox:checked",this).length==0){alert("Please select something to update");return}var c=$("#divEdiList tbody input:checkbox:checked");if(c.length==0){alert("Please select some POs to apply the routing information to");return}var b=$("form",this);c.clone().appendTo(b);b.submit()}},{text:"Cancel",click:function(b,c){$(this).dialog("close")}}]}).on("change","input",function(b){$("#divEdiList tbody input:checked").change()}).on("keyup","input:text",function(b){if($(this).val()){$("#cb"+$(this).attr("id")).prop("checked",true)}});$("#divEdiList").on("change","table thead input:checkbox",function(d){var c=$(this).is(":checked");$("tbody input:checkbox",$(this).closest("table")).filter(function(e){return $(this).prop("checked")!=c}).prop("checked",c).change();var b=$("tbody tr.ui-selectee",$(this).closest("table"));b.toggleClass("ui-selected",c);a();return true}).on("change","tbody input:checkbox",function(d){var b=$(this).closest("tr");var c=$(this).is(":checked");b.find("td.ui-selectee").toggleClass("ui-selected",c);a();$("#dlgRoutingEditor input:text").each(function(e){if($("#cb"+$(this).attr("id")).is(":checked")){b.find("label[for="+$(this).attr("id")+"]").toggleClass("text-changed",c).next("span").text(c?$(this).val():"").toggle(c)}else{b.find("label[for="+$(this).attr("id")+"]").removeClass("text-changed").next("span").empty().hide()}})}).on("click","div.ui-icon-close",function(b){if(!confirm("Do you want to remove this order ")){return false}$.ajax({cache:false,url:$(b.delegateTarget).attr("data-delete-url").replace("~",$(this).attr("data-key")),type:"POST",context:this,success:function(c,e,d){if(d.status==203){alert(c);return}$(this).parents("tr").addClass("text-changed ui-state-disabled").removeClass("ui-selected ui-selectee").find("div").removeClass("ui-icon ui-icon-close").text("Done");a()},error:function(d,e,c){alert(d.responseText)}})}).find("tbody").selectable({filter:"tr:not(.ui-state-disabled)",cancel:"tr.ui-state-disabled,td:has(.ui-icon-close,.ui-icon-contact)",stop:function(b,c){$("tr",this).each(function(){var d=$("input:checkbox",this);var e=$(this).is(".ui-selected");if(d.prop("checked")!=e){d.prop("checked",e).change()}})}}).end().tooltip({content:function(){return $(this).next().html()},items:"span.ui-icon.ui-icon-alert"});$("#tbCarrier").autocomplete({minLength:0,source:$("#tbCarrier").attr("data-carrier-autocomplete"),change:function(b,c){if(c.item==null){$.ajax({cache:false,url:$(this).attr("data-validate-carrier").replace("~",$(this).val()),type:"POST",context:this,success:function(d,f,e){if(e.status==203){alert(d);$(this).val("");$("#cbtbCarrier").removeAttr("checked");return}},error:function(e,f,d){alert(e.responseText)}})}$(this).change()},select:function(b,c){$("#cbtbCarrier").prop("checked",true)},autoFocus:true}).dblclick(function(b){$(this).autocomplete("search")});$("#tbPickupDate").datepicker({showOn:"button",buttonImage:$("#tbPickupDate").attr("data-calendar-img"),buttonImageOnly:true,dateFormat:"m/d/yy",onSelect:function(){$("#cbtbPickupDate").prop("checked",true);$(this).change()}});$("#tbStartDate,#tbDcCancelDate").datepicker({showOn:"button",buttonImage:$("#tbStartDate,#tbDcCancelDate").attr("data-calendar-img"),buttonImageOnly:true,dateFormat:"m/d/yy"});$("#quicklist").on("click",'a[href^="#"]',function(b){$("a",b.delegateTarget).removeClass("ui-state-highlight");$(this).addClass("ui-state-highlight");$("table caption").removeClass("ui-state-highlight");$("caption",$(this).attr("href")).addClass("ui-state-highlight")});$("#btnApplyFilter").button()});