$(document).ready(function(){$("#btnSearch").button({icons:{primary:"ui-icon-search"}}).on("click",function(b){var a=$(this).closest("form");$.ajax({url:a.attr("action"),data:a.serializeArray(),type:"GET",cache:false,statusCode:{200:function(c,e,d){window.location.href=c;return true},203:function(c,e,d){$("#layoutError").text(c).show()}}}).fail(function(d,e,c){alert(d.responseText)});return false})});$(document).ready(function(){$("#printerlist").on("change","input:checkbox",function(b){var a=$("input:checkbox:checked",b.delegateTarget).length;if(a){$("#btnPrintNow").button("enable");$("#printercount").text(a)}else{$("#btnPrintNow").button("disable");$("#printercount").empty()}});$("#tabs").tabs();$("#tbBatchSize").spinner({min:0,max:10000,step:50,change:function(a,b){if(b.value>10000){return false}return true}});$("#btnPrintNow").button({icons:{primary:"ui-icon-print"}}).on("click",function(a){if($(this).queue().length>0){$(this).clearQueue().button("disable");$("#stopPrinting").text("Stopping");return false}$("#startPrinting").hide();$("#stopPrinting").show().text("Stop");$("#printerlist").find("span.printing,span.printed").css("visibility","hidden").end().find("input:checked").each($.proxy(function(c,b){$(this).queue($.proxy(function(e){var d={};d[$("#bucketId").attr("name")]=$("#bucketId").val();d[$(this.checkbox).attr("name")]=$(this.checkbox).val();d[$("#tbBatchSize").attr("name")]=$("#tbBatchSize").val();d[$(this.button).attr("data-clearcookie")]=this.index==0;$.ajax({url:$("#frmPrintNewBatch").attr("action"),data:d,type:"POST",cache:false,context:this,beforeSend:function(){$(this.checkbox).parent().nextAll("span.printing").css("visibility","visible")}}).done(function(g,j,i){var f=$(this.checkbox).parent().nextAll("span.printing").hide().end().nextAll("span.printed").css("visibility","visible").find("a");if(g){var h=f.attr("href");f.attr("href",h.substr(0,h.indexOf("=")+1)+g).text(g);e()}else{f.removeAttr("href").text("Nothing Printed");$(this.button).clearQueue()}}).fail(function(g,h,f){$(this.button).clearQueue();alert(g.responseText)}).always(function(f,g){if($(this.button).queue().length==0){$(this.button).hide();$("#aRefresh").show()}$(this.checkbox).parent().nextAll("span.printing").css("visibility","hidden")})},{checkbox:b,button:this,index:c}))},this));return false})});